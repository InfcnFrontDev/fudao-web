<!DOCTYPE html>
<html style="width:100%;height: 100%;overflow: hidden">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
    <link rel="stylesheet" href="./css/global.css">
    <link rel="stylesheet" href="./css/appraisal.css">
    <script src="js/privatejs/main.js"></script>
    <script src="js/jquery.min.js"></script>
    <script src="js/apprasial.js"></script>
    <script src="js/config.js"></script>

</head>
<body style="width:100%;height:100%;overflow: hidden">
<div class="appraisalBox">
    <div style="margin:10px auto;width:220px;height:220px;display:flex;justify-content:center;position:relative">
        <div id="div_img" style="display:none;">
            <img src="images/load_fudaozhishu.gif" width="220" height="220"
                 style="position:absolute;top:0;left:0; z-index: 0;"/>
        </div>
        <div id="div_svg">
            <svg width="220" height="220" class="pt-ab pt1">
                <circle cx="110" cy="110" r="70" stroke-width="5" stroke="#C9CACA" fill="none"></circle>
                <circle cx="110" cy="110" r="70" stroke-width="5" stroke="#00cccc" fill="none" id="svg_zhengzhuang"
                        transform="matrix(0,-1,1,0,0,220)"></circle>
            </svg>
            <svg width="220" height="220" class="pt-ab pt2">
                <circle cx="110" cy="110" r="80" stroke-width="5" stroke="#C9CACA" fill="none"></circle>
                <circle cx="110" cy="110" r="80" stroke-width="5" stroke="#66cc00" fill="none" id="svg_xinli"
                        transform="matrix(0,-1,1,0,0,220)"></circle>
            </svg>
            <svg width="220" height="220" class="pt-ab pt3">
                <circle cx="110" cy="110" r="90" stroke-width="5" stroke="#C9CACA" fill="none"></circle>
                <circle cx="110" cy="110" r="90" stroke-width="5" stroke="#cc9900" fill="none" id="svg_shehui"
                        transform="matrix(0,-1,1,0,0,220)"></circle>
            </svg>
            <svg width="220" height="220" class="pt-ab pt4">
                <circle cx="110" cy="110" r="100" stroke-width="5" stroke="#C9CACA" fill="none"></circle>
                <circle cx="110" cy="110" r="100" stroke-width="5" stroke="#ff9900" fill="none" id="svg_zice"
                        transform="matrix(0,-1,1,0,0,220)"></circle>
            </svg>
        </div>

        <div style="position:absolute; top:96px; left:62px;">
            <p class="fdzs">看漫画，来自评</p>
        </div>
    </div>
    <div id="before" class="appraisalMark">
        <div class="jinduBox">
            <a class="appraisalsl" data-reveal-id="myModal"><b>生理测评</b><span>00%</span><i><cite></cite></i></a>
            <a class="appraisalxl" data-reveal-id="myModal"><b>心理测评</b><span>00%</span><i><cite></cite></i></a>
            <a class="appraisalsj" data-reveal-id="myModal"><b>社交测评</b><span>00%</span><i><cite></cite></i></a>
            <a class="appraisalzc" data-reveal-id="myModal"><b>自测测评</b><span>00%</span><i><cite></cite></i></a>
        </div>
        <a class="appraisalBtn" data-reveal-id="myModal">
            一键测评
        </a>

    </div>
    <div id="myModal" class="reveal-modal">
        <a class="close-reveal-modal">&#215;</a>
        <div id="myModal2"></div>
    </div>
</div>


<script>
    var token = getQueryString('token');
    localStorage.setItem('zizhen_token', token);
    /*
    * 比例填充
    * */
    var appraisalsl = localStorage.getItem('appraisalsl') || "00" + "%";
    var appraisalxl = localStorage.getItem('appraisalxl') || "00" + "%";
    var appraisalsj = localStorage.getItem('appraisalsj') || "00" + "%";
    var appraisalzc = localStorage.getItem('appraisalzc') || "00" + "%";
    $(".appraisalsl span").html(appraisalsl);
    $(".appraisalsl cite").css('width', 1.3 * parseInt(appraisalsl));
    $(".appraisalxl span").html(appraisalxl);
    $(".appraisalxl cite").css('width', 1.3 * parseInt(appraisalxl));
    $(".appraisalsj span").html(appraisalsj);
    $(".appraisalsj cite").css('width', 1.3 * parseInt(appraisalsj));
    $(".appraisalzc span").html(appraisalzc);
    $(".appraisalzc cite").css('width', 1.3 * parseInt(appraisalzc));

    /*
    * 圆环修改
    * */
//    appraisal_init(10, 10, 10, 10);


    /*
     * 点击测评
     * */
    var url = "assessmentTest.html"; //被加载的页面url
    $('.appraisalsl').click(function () {
        $("#myModal2").html("");
        localStorage.setItem('questionsType', JSON.stringify([1, "生理测评",'appraisalsl']));
        $("#myModal2").load(url, null);
    });
    $('.appraisalxl').click(function () {
        $("#myModal2").html("");
        localStorage.setItem('questionsType', JSON.stringify([2, "心理测评",'appraisalxl']));
        $("#myModal2").load(url, null);
    });
    $('.appraisalsj').click(function () {
        $("#myModal2").html("");
        localStorage.setItem('questionsType', JSON.stringify([3, "社交测评",'appraisalsj']));
        $("#myModal2").load(url, null);
    });
    $('.appraisalzc').click(function () {
        $("#myModal2").html("");
        localStorage.setItem('questionsType', JSON.stringify([4, "自测测评",'appraisalzc']));
        $("#myModal2").load(url, null);
    });
    $('.appraisalBtn').click(function () {
        $("#myModal2").html("");
        localStorage.setItem('questionsType', JSON.stringify([0, "一键测评",'all']));
        $("#myModal2").load(url, null);
    });

    function appraisal_init(a, b, c, d) {
        var userInformation = {
            'zhengzhuangSocre': a,
            'xinliSocre': b,
            'shehuiSocre': c,
            'ziceSocre': d
        }
        //document.getElementById('countSocre').innerHTML=userInformation.countSocre;
        var svg1 = document.getElementById("svg_zhengzhuang");
        var svg2 = document.getElementById("svg_xinli");
        var svg3 = document.getElementById("svg_shehui");
        var svg4 = document.getElementById("svg_zice");
        var percent1 = Math.round(parseFloat(userInformation.zhengzhuangSocre)) / 100,
            perimeter1 = Math.PI * 2 * 60;
        var percent2 = Math.round(parseFloat(userInformation.xinliSocre)) / 100,
            perimeter2 = Math.PI * 2 * 70;
        var percent3 = Math.round(parseFloat(userInformation.shehuiSocre)) / 100,
            perimeter3 = Math.PI * 2 * 80;
        var percent4 = Math.round(parseFloat(userInformation.ziceSocre)) / 100,
            perimeter4 = Math.PI * 2 * 90;
        svg1.setAttribute('stroke-dasharray', perimeter1 * percent1 + " " + perimeter1 * (1 - percent1));
        svg2.setAttribute('stroke-dasharray', perimeter2 * percent2 + " " + perimeter2 * (1 - percent2));
        svg3.setAttribute('stroke-dasharray', perimeter3 * percent3 + " " + perimeter3 * (1 - percent3));
        svg4.setAttribute('stroke-dasharray', perimeter4 * percent4 + " " + perimeter4 * (1 - percent4));
    }

</script>

</body>
</html>