<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Swiper demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="./css/swiper.min.css">
    <script type="text/javascript" src="js/mui.min.js"></script>
    <script type="text/javascript" src="js/common.js"></script>
    <script type="text/javascript" src="js/privatejs/self_cultivation_result.js"></script>
    <script type="text/javascript" src="js/config.js"></script>
    <script type="text/javascript" src="js/source/echarts.simple.min.js"></script>
    <script type="text/javascript" src="js/source/localstorage.js"></script>
    <script type="text/javascript" src="js/source/public.js"></script>
    <script type="text/javascript" src="js/source/public_data.js"></script>
    <script type="text/javascript" src="js/privatejs/check_process.js"></script>
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="diagnosisMap/js/index.js"></script>
    <script src="js/swiper.min.js"></script>
  <!--  <script src="js/privatejs/main.js"></script>-->

    <!-- Demo styles -->
    <style>
        html, body {
            position: relative;
            height: 100%;
        }

        body {
            background: #eee;
            font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
            font-size: 14px;
            color: #000;
            margin: 0;
            padding: 0;
        }

        .swiper-container {
            width: 100%;
            height: 100%;
        }

        .swiper-slide {
            text-align: center;
            font-size: 18px;
            background: #fff;
        }

        #svgGraph {
            width: 85%;
            height: 85%;
            margin: 0 auto;
        }

        #opacityNext {
            opacity: 0;
        }
    </style>
</head>
<body>
<!-- Swiper -->
<div class="swiper-container">
    <div class="swiper-wrapper">
        <!--slide1-->
        <div class="swiper-slide swiper-no-swiping" id="deepPage1" style="overflow: scroll">
            <div style="position:absolute;top:30px;right:-15px;z-index: 99999999;">
                <div class="chart" id="pieChart" style="width: 180px;height:140px;"></div>
                <ul id="div_list"
                    style="position:relative;left:10px;font-size:12px;padding-top: 10px;text-align: left;padding-right: 10px">
                </ul>
            </div>
            <div id='div_content'
                 style="height: 100%;width:100%;display: flex;flex-direction: column;justify-content: center">
                <img src="./images/click_zhengzhuang.png" style="margin-bottom:-63px;margin-top: 30px;" width="40%"
                     height="15%" id="click_zhengzhuang"/>
                <div id="renti_xiuyixiu">
                    <div id="svgGraph"></div>
                </div>
                <div id="div_list_selected"
                     style="width:100%;text-align: center;margin-top:5px;height: 120px;">
                </div>
                <div width="100%" align="center" id="table_id">
                </div>
            </div>
        </div>
        <!--slide2-->
        <div class="swiper-slide swiper-no-swiping" style="display: flex;flex-direction: column">
            <div style="flex:1;overflow-y: scroll;overflow-x: hidden">
                <div>
                    <p style="font-size: 13px;text-align: left;padding: 8px;padding-left: 20px;background: #F0F0F0;margin: 0;border-bottom: 1px solid #D7D7D7;">
                        您已选择的症状有</p>
                    <div id="div_list_selected2"
                         style="width:90%;padding:0 40px;text-align: center;margin-top:5px;border-bottom: 2px solid #D8D8D8;clear: both">
                        <div style="height: 30px"></div>
                    </div>
                </div>
                <div>
                    <div style="font-size: 13px;text-align: left;padding: 8px;background: #F0F0F0;margin: 0;border-bottom: 1px solid #D7D7D7;">
                        <span>您最近做过以下几项事情吗？</span>
                        <p style="float:right;font-size: 15px;margin: 0;margin-right: 12%">都没有<input type="checkbox" name="category" value="都没有" onclick="my_func()"/>
                        </p></div>
                    <div id="checkBox">
                    </div>
                </div>
            </div>
            <a id="depthSubmit"
               style="display:block;margin: 20px auto 30px; height:38px; line-height:38px; background:#a1cc00;width: 60%;text-align: center;color:#fff;border-radius: 5px"
               onclick="depth_submit()">提&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;交</a>
        </div>
    </div>
    <!-- Add Arrows -->
    <div class="swiper-button-next" id="opacityNext"
         style="background-image: url('./images/next.png');background-size: 200%;"></div>
    <div class="swiper-button-prev" id="opacityPre"
         style="background-image: url('./images/pre.png');background-size: 200%;"></div>
</div>


<!-- Initialize Swiper -->
<script>
    var type = true;
    function groupBy(current, type) {
        var result = {};
        for (var i = 0; i < current.length; i++) {
            result[current[i][type]] = result[current[i][type]] || [];
            result[current[i][type]].push(current[i]);
        }
        return result;
    }
    var swiper = new Swiper('.swiper-container', {
        nextButton: '.swiper-button-next',
        prevButton: '.swiper-button-prev',
        spaceBetween: 30
    });
    var diseasespeople='quality',sex=1;
    //var token = "05d63d86-bd60-4012-8b9b-5a7776dcb050";
    var token = localStorage.getItem('zizhen_token');
    $.ajax({
        type: "post",
        url: urls.USER_GETLOGINUSER,
        headers: {
            authorization: token

        },
        success: function (res) {
            //alert(JSON.stringify(res));
            diseasespeople=res.obj.crowd;
            sex=res.obj.sex;
        },
        error: function () {
            console.log('err')
        }
    });
    var svgPath = '';
    if ( diseasespeople== 'aged') {
        if (sex==1) {
            svgPath = 'diagnosisMap/images/laoren.svg';
        } else if(sex==2) {
            svgPath = 'diagnosisMap/images/laotaitai.svg'
        }
    } else if (diseasespeople== 'quality') {
        if (sex==1) {
            svgPath = 'diagnosisMap/images/nanren.svg';
        } else if(sex==2) {
            svgPath = 'diagnosisMap/images/nvren.svg'
        }
    } else if (diseasespeople=='woman_un'||diseasespeople=='woman_pre'||diseasespeople=='woman_ing'||diseasespeople=='woman_ed'||diseasespeople=='woman_next'){
        svgPath = 'diagnosisMap/images/nvren.svg'
    }

    loadSvg(svgPath);
    var symptomList = [];
    $.ajax({
        type: "post",
        url: urls.DIAGNOSIS_GETUSERSYMPTOMLIST,
        headers: {
            authorization: token
        },
        success: function (res) {
            if (res.obj.length == 0) {
                $.ajax({
                    type: "post",
                    url: urls.DIAGNOSIS_GETPARTORGANSYMPTOMLIST,
                    headers: {
                        authorization: token
                    },
                    success: function (res) {
                        symptomList = res.obj;
                        /*       symptomList = {
                         "头部": {
                         "鼻": [
                         "鼻塞",
                         "流涕"
                         ],
                         "精神": [
                         "焦虑",
                         "自罪自责"
                         ],
                         "耳": [
                         "耳鸣",
                         "耳堵"
                         ]
                         },
                         "颈部": {
                         "咽喉": [
                         "咽部异物感",
                         "声带疲劳"
                         ], "颈部": [
                         "颈项强直、疼痛",
                         "不能点头、仰头及转头"
                         ]
                         },
                         "胸部": {
                         "心脏": [
                         "心慌气短",
                         "心悸",
                         "胸闷",
                         "心率变化",
                         "心律失常"
                         ],
                         "胸腔": [
                         "胸部有捆绑感"
                         ]
                         },
                         "腹部": {
                         "上腹": [
                         "大便失禁",
                         "食欲紊乱",
                         "排便费力",
                         "干球状便或硬便",
                         "排便不尽感",
                         "腹胀",
                         "腹泻",
                         "消化不良"
                         ],
                         "下腹": [
                         "尿频",
                         "膀胱和直肠功能障碍"
                         ], "生殖": [
                         "阴茎勃起障碍",
                         "性功能减退"
                         ]
                         },
                         "背部": {
                         "脊柱": [
                         "腰椎侧凸",
                         "肩背疼痛发僵"
                         ],
                         "腰骶部": [
                         "腰痛",
                         "坐骨神经痛",
                         "腰部活动受限",
                         "椎间隙、椎旁压痛"
                         ]

                         },

                         "四肢": {
                         "颈部": [
                         "鼻塞22",
                         "流涕"
                         ],
                         "食道": [
                         "咽部异物感",
                         "流涕"
                         ]
                         }

                         }*/
                    },
                    error: function () {
                        console.log('err')
                    }
                });
            } else {
                type = false;
                /*res={
                 obj:[
                 "鼻塞",
                 "流涕",
                 "心慌",
                 "心悸",
                 "胸闷",
                 "心率变化",
                 "心律失常",
                 "腰痛",
                 "坐骨神经痛",
                 "腰部活动受限",
                 "椎间隙、椎旁压痛"
                 ]
                 };*/
                fun_pathogeny('tou', res.obj, false);
            }
        },
        error: function () {
            console.log('err')
        }
    });
    $('#opacityNext').click(function () {
        document.getElementById("opacityNext").style.opacity = 0;
        fun_choosed_render(token, type);
        swiper.slideNext();
    });
    $('#opacityPre').click(function () {
        swiper.slidePrev();
        document.getElementById("opacityNext").style.opacity = 1;
    });
    $('#toujing').click(function () {
        console.log(type);
        if (type) {
            document.getElementById("toujing").style.background = "#f00";
            fun_pathogeny('tou', symptomList["头部"], true);
        }
    });

    $('#xiong').click(function () {
        if (type) {
            fun_pathogeny('xiong', symptomList["胸部"], true);
            event.stopPropagation();
        }
    });

    $('#fu').click(function () {
        if (type) {
            fun_pathogeny('fu', symptomList["腹部"], true);
            event.stopPropagation();
        }
    });

    $('#dun').click(function () {
        if (type) {
            fun_pathogeny('bei', symptomList["背部"], true);
            event.stopPropagation();
        }
    });

    $('#zuoshou').click(function () {
        if (type) {
            fun_pathogeny('sizhi', symptomList["四肢"], true);
            event.stopPropagation();
        }
    });

    $('#youshou').click(function () {
        if (type) {
            fun_pathogeny('sizhi', symptomList["四肢"], true);
            event.stopPropagation();
        }
    });

    $('#tui').click(function () {
        if (type) {
            fun_pathogeny('sizhi', symptomList["四肢"], true);
            event.stopPropagation();
        }
    });

    $('#quanshen').click( function () {
        if (type) {
            fun_pathogeny("check_quanshen", symptomList["全身"], true);
            event.stopPropagation();
        }
    });

    $('#xiongtanhao').click(function () {
        if (type) {
            fun_pathogeny("check_xiong", symptomList, true);
            event.stopPropagation();
        }
    });

    $('#futaihao').click(function () {
        if (type) {
            fun_pathogeny("check_fu", symptomList, true);
            event.stopPropagation();
        }
    });

    $('#button').click(function () {
        if (type) {
            check_process_two_sure();

        }
    });

    (function ($, doc) {

            mui.init();
            mui.plusReady(function () {
                //仅支持竖屏显示
                plus.screen.lockOrientation("portrait-primary");
                //数据处理
                fun_handle_data();
                //删除本地保存的各向指数
                localStorage.removeItem("gexiangzhishu_1");
                localStorage.removeItem("gexiangzhishu_2");
                localStorage.removeItem("gexiangzhishu_3");
                localStorage.removeItem("gexiangzhishu_4");
                //各向指数赋值
                //刷新main界面
                var mainView = plus.webview.getWebviewById("main");
                mui.fire(mainView, 'check_process_event', {});
//            //人体自定义高度
//            document.getElementById("svgGraph").style.height = (plus.screen.resolutionHeight - 180) + "px";
//            console.log(document.getElementById("svgGraph").style.height)
            });

            mui('body').on('tap', '#toujing', function () {
                if (type) {
                    document.getElementById("toujing").style.background = "#f00";
                    fun_pathogeny('tou', symptomList["头部"], true);
                }
            });

            mui('body').on('tap', '#xiong', function () {
                if (type) {
                    fun_pathogeny('xiong', symptomList["胸部"], true);
                    event.stopPropagation();
                }
            });

            mui('body').on('tap', '#fu', function () {
                if (type) {
                    fun_pathogeny('fu', symptomList["腹部"], true);
                    event.stopPropagation();
                }
            });

            mui('body').on('tap', '#dun', function () {
                if (type) {
                    fun_pathogeny('bei', symptomList["背部"], true);
                    event.stopPropagation();
                }
            });

            mui('body').on('tap', '#zuoshou', function () {
                if (type) {
                    fun_pathogeny('sizhi', symptomList["四肢"], true);
                    event.stopPropagation();
                }
            });

            mui('body').on('tap', '#youshou', function () {
                if (type) {
                    fun_pathogeny('sizhi', symptomList["四肢"], true);
                    event.stopPropagation();
                }
            });

            mui('body').on('tap', '#tui', function () {
                if (type) {
                    fun_pathogeny('sizhi', symptomList["四肢"], true);
                    event.stopPropagation();
                }
            });

            mui('body').on('tap', '#quanshen', function () {
                if (type) {
                    fun_pathogeny("check_quanshen", symptomList["全身"], true);
                    event.stopPropagation();
                }
            });

            mui('body').on('tap', '#xiongtanhao', function () {
                if (type) {
                    fun_pathogeny("check_xiong", symptomList, true);
                    event.stopPropagation();
                }
            });

            mui('body').on('tap', '#futaihao', function () {
                if (type) {
                    fun_pathogeny("check_fu", symptomList, true);
                    event.stopPropagation();
                }
            });

            mui('body').on('tap', '#button', function () {
                if (type) {
                    check_process_two_sure();

                }
            });


            document.getElementById("table_id").style.marginTop = "10px";
            //diseasespeople = 'high_quality_population';
//        diseasespeople = chooseVersion();

            mui('body').on('tap', '#opacityNext', function () {
                swiper.slideNext();
                document.getElementById("opacityNext").style.opacity = 0;
                fun_choosed_render(token, type);
            });
            mui('body').on('tap', '#opacityPre', function () {
                swiper.slidePrev();
                document.getElementById("opacityNext").style.opacity = 1;
            });
        }
        (mui, document)
    );
</script>
</body>
</html>
